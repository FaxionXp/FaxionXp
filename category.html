<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Category - FaxionXp</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <style>
        @font-face {
            font-family: 'sourcesan';
            src: url('./SourceSansPro-Black.otf') format('truetype');
        }
        @font-face {
            font-family: 'sourcesan2';
            src: url('./SourceSansPro-Semibold.otf') format('truetype');
        }
        body {
            font-family: 'sourcesan2','Inter', sans-serif;
            background-color: #F8F5F0; /* Very light cream background */
            color: #2D3A4B; /* Deep muted blue */
        }
        .logo, .section-title {
            font-family:'sourcesan','Playfair Display', serif;
        }
        /* Mobile menu styles (copied for consistency) */
        .navbar-links {
            display: none; /* Hidden by default on mobile */
        }
        .navbar-links.active {
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 56px;
            left: 0;
            width: 100%;
            max-height: 60vh;
            background-color: #2c3e50;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 0.5rem 0;
            transition: all 0.3s ease-in-out;
            z-index: 51;
            overflow-y: auto;
            align-items: center;
            justify-content: flex-start;
        }
        .navbar-links.active ul {
            list-style: none;
            padding: 0;
            margin: 0;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }
        .navbar-links.active ul li {
            margin: 0.25rem 0;
        }
        .navbar-links.active ul li a {
            padding: 0.5rem 0;
            font-size: 1rem;
            display: block;
            text-align: center;
            width: 100%;
        }
        .hamburger.active .bar:nth-child(1) { transform: translateY(8px) rotate(45deg); }
        .hamburger.active .bar:nth-child(2) { opacity: 0; }
        .hamburger.active .bar:nth-child(3) { transform: translateY(-8px) rotate(-45deg); }
        body.menu-open main,
        body.menu-open #mobile-search-bar-container { /* No mobile categories on this page */
            /* Removed filter: blur(3px); */
            transition: filter 0.3s ease-out;
        }
        body.menu-open .navbar-links { filter: none; }
    </style>
</head>
<body class="bg-[#F8F5F0] text-gray-800 leading-relaxed">

    <header class="bg-[#2D3A4B] text-white p-4 shadow-lg fixed w-full top-0 left-0 z-50 flex justify-between items-center px-6 md:px-10 h-[56px]">
        <div class="flex flex-shrink-0 gap-2">
            <img src="./fashionlogo.png" alt="logo" class="rounded-full mb-1 h-7">      
            <a href="index.html" class="logo text-[#D4AF37] text-xl md:text-2xl font-bold tracking-wide transition-colors duration-300 hover:text-[#C0A020]">FaxionXp</a>
        </div>
        <nav id="main-nav-links" class="navbar-links md:flex md:justify-center md:items-center md:flex-grow md:w-auto md:order-none"> <ul class="flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-6">
                <li><a href="index.html" class="text-base font-medium hover:text-[#D4AF37] transition-colors duration-300 relative group">Home<span class="absolute bottom-0 left-0 w-0 h-0.5 bg-[#D4AF37] transition-all duration-300 group-hover:w-full"></span></a></li>
                <li><a href="category.html?type=Men" class="text-base font-medium hover:text-[#D4AF37] transition-colors duration-300 relative group">Men<span class="absolute bottom-0 left-0 w-0 h-0.5 bg-[#D4AF37] transition-all duration-300 group-hover:w-full"></span></a></li>
                <li><a href="category.html?type=Women" class="text-base font-medium hover:text-[#D4AF37] transition-colors duration-300 relative group">Women<span class="absolute bottom-0 left-0 w-0 h-0.5 bg-[#D4AF37] transition-all duration-300 group-hover:w-full"></span></a></li>
                <li><a href="category.html?type=Beauty" class="text-base font-medium hover:text-[#D4AF37] transition-colors duration-300 relative group">Beauty<span class="absolute bottom-0 left-0 w-0 h-0.5 bg-[#D4AF37] transition-all duration-300 group-hover:w-full"></span></a></li>
                <li><a href="category.html?type=Footwears" class="text-base font-medium hover:text-[#D4AF37] transition-colors duration-300 relative group">Footwears<span class="absolute bottom-0 left-0 w-0 h-0.5 bg-[#D4AF37] transition-all duration-300 group-hover:w-full"></span></a></li>
            </ul>
        </nav>
        <div class="flex items-center space-x-3 md:order-last">
            <div class="relative hidden md:block">
                <input type="text" id="desktop-search-input" placeholder="Search with #" class="py-1.5 px-3 pr-9 rounded-full bg-gray-200 text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#D4AF37] w-40 transition-all duration-300 text-sm">
                <button type="submit" id="desktop-search-button" class="absolute right-2 top-1/2 -translate-y-1/2 text-gray-600 hover:text-[#D4AF37] transition-colors duration-300">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                </button>
            </div>
            <div class="hamburger flex flex-col space-y-1.5 cursor-pointer md:hidden transition-all duration-300" onclick="toggleMenu()">
                <div class="bar w-6 h-0.5 bg-white rounded-full transition-all duration-300"></div>
                <div class="bar w-6 h-0.5 bg-white rounded-full transition-all duration-300"></div>
                <div class="bar w-6 h-0.5 bg-white rounded-full transition-all duration-300"></div>
            </div>
        </div>
    </header>

    <div id="mobile-search-bar-container" class="block md:hidden bg-[#2D3A4B] py-3 px-6 shadow-md fixed w-full top-[56px] left-0 z-40 h-[64px]">
        <div class="relative flex items-center w-full max-w-md mx-auto">
            <input type="text" id="mobile-search-input" placeholder="Search with #" class="py-2 px-4 pr-10 rounded-full bg-gray-200 text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#D4AF37] w-full transition-all duration-300">
            <button type="submit" id="mobile-search-button" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-600 hover:text-[#D4AF37] transition-colors duration-300">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
            </button>
        </div>
    </div>

    <main class="pt-[120px] md:pt-[56px] p-4 md:p-8 max-w-7xl mx-auto">
        <h1 id="category-title" class="section-title text-2xl md:text-3xl font-bold text-[#03045E] mb-8 text-center"></h1>
        <div id="category-products-grid" class="grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 justify-items-center">
            </div>
        <p id="no-products-message" class="text-center text-gray-600 mt-8 hidden">No products found in this category.</p>
    </main>

    <footer class="bg-[#0077B6] text-white py-12 px-6 md:px-10 text-center">
        <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8 mb-8 text-left md:text-center">
            <div class="footer-section">
                <h3 class="text-xl font-bold text-[#00B4D8] mb-4">About FaxionXp</h3>
                <p class="text-white text-sm">Your ultimate destination for the latest fashion trends, high-quality apparel, and stylish accessories. Shop with confidence!</p>
            </div>
            <div class="footer-section">
                <h3 class="text-xl font-bold text-[#00B4D8] mb-4">Quick Links</h3>
                <ul class="space-y-2">
                    <li><a href="index.html" class="text-white hover:text-[#00B4D8] transition-colors duration-300 text-sm">Home</a></li>
                    <li><a href="#" class="text-white hover:text-[#00B4D8] transition-colors duration-300 text-sm">Privacy Policy</a></li>
                    <li><a href="#" class="text-white hover:text-[#00B4D8] transition-colors duration-300 text-sm">Terms of Service</a></li>
                    <li><a href="#" class="text-white hover:text-[#00B4D8] transition-colors duration-300 text-sm">Contact Us</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3 class="text-xl font-bold text-[#00B4D8] mb-4">Follow Us</h3>
                <div class="flex justify-center space-x-4">
                    <a href="#" class="inline-flex items-center justify-center w-8 h-8 bg-[#90E0EF] text-[#03045E] rounded-full text-sm font-bold hover:bg-[#00B4D8] hover:scale-110 transition-all duration-300">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" stroke="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-facebook"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>
                    </a>
                    <a href="https://www.instagram.com/faxion_xp?igsh=cHJsMGFjZXMyZHhk" class="inline-flex items-center justify-center w-8 h-8 bg-[#90E0EF] text-[#03045E] rounded-full text-sm font-bold hover:bg-[#00B4D8] hover:scale-110 transition-all duration-300">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-instagram"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.5" y1="6.5" y2="6.5"/></svg>
                    </a>
                    <a href="https://in.linkedin.com/in/faxionxp-undefined-969bb3375" class="inline-flex items-center justify-center w-8 h-8 bg-[#90E0EF] text-[#03045E] rounded-full text-sm font-bold hover:bg-[#00B4D8] hover:scale-110 transition-all duration-300">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" stroke="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect width="4" height="12" x="2" y="9"/><circle cx="4" cy="4" r="2"/></svg>
                    </a>
                    <a href="https://t.me/faxion_deals" class="inline-flex items-center justify-center w-8 h-8 bg-[#90E0EF] text-[#03045E] rounded-full text-sm font-bold hover:bg-[#00B4D8] hover:scale-110 transition-all duration-300">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" stroke="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.17 7.41l-3.35 6.42c-.16.33-.49.54-.86.54-.08 0-.17-.01-.25-.03l-4.18-1.25c-.46-.14-.73-.6-.62-1.07.11-.47.56-.75 1.03-.64l3.52.88 1.9-3.8c.11-.22.35-.35.6-.35.24 0 .46.12.58.33.12.21.14.47.05.7-.13.31-.4.5-.72.5L9.6 14.1l-1.5 1.5c-.18.18-.44.27-.7.27-.26 0-.5-.1-.68-.28-.18-.18-.27-.44-.27-.7V9.7c0-.46.28-.88.72-1.07l7.07-2.61c.46-.17.96.06 1.13.52.17.46-.06.96-.52 1.13z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
        <div class="border-t border-[#90E0EF] pt-8 text-gray-700 text-sm">
            &copy; 2025 FaxionXp. All rights reserved.
        </div>
    </footer>

    <template id="product-card-template">
        <div class="product-card-item flex-shrink-0 w-40 bg-white rounded-xl shadow-xl p-4 flex flex-col items-center justify-around transition-transform duration-300 hover:scale-105 hover:shadow-2xl">
            <img src="" alt="Product Image" class="w-full h-42 object-cover rounded-lg mb-3 product-image">
            <h3 class="text-xs font-semibold text-gray-800 mb-2 product-name"></h3>
            <div class="flex items-center justify-center mb-3 product-prices">
                <span class="text-gray-500 line-through text-xs product-original-price"></span>
                <span class="text-red-500 font-bold text-sm ml-2 product-discounted-price"></span>
                <span class="text-green-600 text-xs ml-2 product-discount-percentage"></span>
            </div>
            <a href="#" target="_blank" rel="noopener noreferrer" class="product-buy-button w-full bg-[#0077B6] text-white px-3 py-1.5 rounded-full text-sm font-medium hover:bg-[#00B4D8] hover:scale-105 transition-all duration-300 ease-in-out text-center">Buy Now</a>
        </div>
    </template>

    <script>
        // --- Data Simulation (Same as index.html) ---
        async function fetchProductData() {
            const GOOGLE_SHEET_API_URL = 'https://script.google.com/macros/s/AKfycbx1BProeY4onMB7bXsJiWlMm28_DZxw3p4LTVD_MqG3HcsqvESpLgyrBM_TPO2GqOewPQ/exec'; // REPLACE THIS

            try {
                // Uncomment this for actual Google Sheet data
                const response = await fetch(GOOGLE_SHEET_API_URL);
                const data = await response.json();
                return data.map(item => ({
                    id: item.id,
                    name: item.name,
                    originalPrice: parseFloat(item.originalPrice),
                    discountedPrice: parseFloat(item.discountedPrice),
                    discount: parseInt(item.discount),
                    image: item.image,
                    category: item.category,
                    section: item.section
                }));

                // Hardcoded data for demonstration if Google Apps Script is not set up
                return new Promise(resolve => {
                    setTimeout(() => {
                        resolve([
                            { id: 'prod001', name: 'Elegant Summer Dress', originalPrice: 79.99, discountedPrice: 69.99, discount: 12, image: 'https://placehold.co/300x300/e0e0e0/333333?text=Elegant+Dress', category: 'Women', section: 'new-arrivals', affiliateLink: 'https://example.com/dress-affiliate-link' },
                            { id: 'prod002', name: 'Men\'s Casual Polo', originalPrice: 50.00, discountedPrice: 45.00, discount: 10, image: 'https://placehold.co/300x300/d0d0d0/333333?text=Men\'s+Polo', category: 'Men', section: 'new-arrivals', affiliateLink: 'https://example.com/polo-affiliate-link' },
                            { id: 'prod003', name: 'Chic High Heels', originalPrice: 99.99, discountedPrice: 89.50, discount: 10, image: 'https://placehold.co/300x300/c0c0c0/333333?text=Stylish+Heels', category: 'Footwears', section: 'new-arrivals', affiliateLink: 'https://example.com/heels-affiliate-link' },
                            { id: 'prod004', name: 'Luxury Beauty Kit', originalPrice: 150.00, discountedPrice: 120.00, discount: 20, image: 'https://placehold.co/300x300/b0b0b0/333333?text=Luxury+Beauty', category: 'Beauty', section: 'new-arrivals', affiliateLink: 'https://example.com/beauty-kit-affiliate-link' },
                            { id: 'prod005', name: 'Sporty Running Sneakers', originalPrice: 85.00, discountedPrice: 75.00, discount: 12, image: 'https://placehold.co/300x300/a0a0a0/333333?text=Sport+Sneakers', category: 'Footwears', section: 'new-arrivals', affiliateLink: 'https://example.com/sneakers-affiliate-link' },
                            { id: 'prod006', name: 'Elegant Women\'s Bag', originalPrice: 110.00, discountedPrice: 95.00, discount: 13, image: 'https://placehold.co/300x300/909090/333333?text=Fashion+Handbag', category: 'Women', section: 'new-arrivals', affiliateLink: 'https://example.com/handbag-affiliate-link' },

                            { id: 'prod007', name: 'Classic White Tee', originalPrice: 25.00, discountedPrice: 19.99, discount: 20, image: 'https://placehold.co/300x300/ff0000/ffffff?text=Best+Seller+1', category: 'Men', section: 'best-seller', affiliateLink: 'https://example.com/tee-affiliate-link' },
                            { id: 'prod008', name: 'Comfortable Jeans', originalPrice: 60.00, discountedPrice: 49.99, discount: 17, image: 'https://placehold.co/300x300/00ff00/ffffff?text=Best+Seller+2', category: 'Men', section: 'best-seller', affiliateLink: 'https://example.com/jeans-affiliate-link' },
                            { id: 'prod009', name: 'Stylish Sunglasses', originalPrice: 35.00, discountedPrice: 29.99, discount: 14, image: 'https://placehold.co/300x300/0000ff/ffffff?text=Best+Seller+3', category: 'Accessories', section: 'best-seller', affiliateLink: 'https://example.com/sunglasses-affiliate-link' },
                            { id: 'prod010', name: 'Leather Wallet', originalPrice: 45.00, discountedPrice: 39.99, discount: 11, image: 'https://placehold.co/300x300/ffff00/000000?text=Best+Seller+4', category: 'Accessories', section: 'best-seller', affiliateLink: 'https://example.com/wallet-affiliate-link' },

                            { id: 'prod011', name: 'Stylish Denim Jacket', originalPrice: 89.99, discountedPrice: 79.99, discount: 11, image: 'https://placehold.co/300x300/ffcc00/2c3e50?text=Trending+Jacket', category: 'Men', section: 'trending-products', affiliateLink: 'https://example.com/jacket-affiliate-link' },
                            { id: 'prod012', name: 'Classic Analog Watch', originalPrice: 160.00, discountedPrice: 149.00, discount: 7, image: 'https://placehold.co/300x300/3498db/ecf0f1?text=Classic+Watch', category: 'Accessories', section: 'trending-products', affiliateLink: 'https://example.com/watch-affiliate-link' },
                            { id: 'prod013', name: 'High-Top Sneakers', originalPrice: 110.00, discountedPrice: 99.00, discount: 10, image: 'https://placehold.co/300x300/e74c3c/ecf0f1?text=Trendy+Sneakers', category: 'Footwears', section: 'trending-products', affiliateLink: 'https://example.com/hightop-sneakers-affiliate-link' },
                            { id: 'prod014', name: 'Silk Pattern Scarf', originalPrice: 35.00, discountedPrice: 29.99, discount: 14, image: 'https://placehold.co/300x300/9b59b6/ecf0f1?text=Elegant+Scarf', category: 'Women', section: 'trending-products', affiliateLink: 'https://example.com/scarf-affiliate-link' },

                            { id: 'prod015', name: 'Spring Collection Dress', originalPrice: 95.00, discountedPrice: 79.99, discount: 16, image: 'https://placehold.co/300x300/800080/ffffff?text=Collection+A', category: 'Women', section: 'latest-collections', affiliateLink: 'https://example.com/spring-dress-affiliate-link' },
                            { id: 'prod016', name: 'Autumn Blazer', originalPrice: 120.00, discountedPrice: 99.99, discount: 17, image: 'https://placehold.co/300x300/008080/ffffff?text=Collection+B', category: 'Men', section: 'latest-collections', affiliateLink: 'https://example.com/blazer-affiliate-link' },
                            { id: 'prod017', name: 'Winter Knit Sweater', originalPrice: 70.00, discountedPrice: 59.99, discount: 14, image: 'https://placehold.co/300x300/808000/ffffff?text=Collection+C', category: 'Women', section: 'latest-collections', affiliateLink: 'https://example.com/sweater-affiliate-link' },
                            { id: 'prod018', name: 'Formal Trousers', originalPrice: 85.00, discountedPrice: 69.99, discount: 18, image: 'https://placehold.co/300x300/000000/ffffff?text=Collection+D', category: 'Men', section: 'latest-collections', affiliateLink: 'https://example.com/trousers-affiliate-link' },
                            { id: 'prod020', name: 'Men\'s Dress Shirt', originalPrice: 55.00, discountedPrice: 48.00, discount: 12, image: 'https://placehold.co/300x300/40E0D0/000000?text=Dress+Shirt', category: 'Men', section: 'new-arrivals', affiliateLink: 'https://example.com/dress-shirt-link-19' },
                            { id: 'prod021', name: 'Women\'s Floral Blouse', originalPrice: 40.00, discountedPrice: 35.00, discount: 12, image: 'https://placehold.co/300x300/FF69B4/FFFFFF?text=Floral+Blouse', category: 'Women', section: 'new-arrivals', affiliateLink: 'https://example.com/blouse-link-20' },
                            { id: 'prod022', name: 'Sport Watch', originalPrice: 180.00, discountedPrice: 150.00, discount: 17, image: 'https://placehold.co/300x300/8A2BE2/FFFFFF?text=Sport+Watch', category: 'Accessories', section: 'trending-products', affiliateLink: 'https://example.com/sport-watch-link-21' },
                            { id: 'prod023', name: 'Running Shoes', originalPrice: 90.00, discountedPrice: 80.00, discount: 11, image: 'https://placehold.co/300x300/00CED1/000000?text=Running+Shoes', category: 'Footwears', section: 'best-seller', affiliateLink: 'https://example.com/running-shoes-link-22' },
                            { id: 'prod024', name: 'Luxury Lipstick Set', originalPrice: 75.00, discountedPrice: 60.00, discount: 20, image: 'https://placehold.co/300x300/FFD700/000000?text=Lipstick+Set', category: 'Beauty', section: 'latest-collections', affiliateLink: 'https://example.com/lipstick-link-23' },
                            { id: 'prod025', name: 'Classic Trench Coat', originalPrice: 250.00, discountedPrice: 200.00, discount: 20, image: 'https://placehold.co/300x300/8B4513/FFFFFF?text=Trench+Coat', category: 'Women', section: 'best-seller', affiliateLink: 'https://example.com/trench-coat-link-24' },
                        ]);
                    }, 500);
                });
            } catch (error) {
                console.error('Error fetching product data:', error);
                throw error;
            }
        }

        let allProducts = []; // To store all fetched products globally

        // --- Dynamic Content Rendering ---
        function renderProducts(products, containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            container.innerHTML = ''; // Clear existing content

            const productCardTemplate = document.getElementById('product-card-template');

            if (products.length === 0) {
                // Only show "No products found" if it's a primary display area, not a carousel that might just be empty
                if (containerId.includes('products-grid')) { // Check if it's the category grid
                    document.getElementById('no-products-message').classList.remove('hidden');
                }
                return;
            } else {
                if (containerId.includes('products-grid')) {
                    document.getElementById('no-products-message').classList.add('hidden');
                }
            }

            products.forEach(product => {
                const cardClone = productCardTemplate.content.cloneNode(true);
                cardClone.querySelector('.product-image').src = product.image;
                cardClone.querySelector('.product-image').alt = product.name;
                cardClone.querySelector('.product-name').textContent = product.name;
                cardClone.querySelector('.product-original-price').textContent = `₹${product.originalPrice.toFixed(0)}`;
                cardClone.querySelector('.product-discounted-price').textContent = `₹${product.discountedPrice.toFixed(0)}`;
                cardClone.querySelector('.product-discount-percentage').textContent = `(-${product.discount}%)`;
                
                const buyButton = cardClone.querySelector('.product-buy-button');
                buyButton.href = product.affiliateLink; // Set affiliate link
                buyButton.target = "_blank"; // Open in new tab
                buyButton.rel = "noopener noreferrer"; // Security best practice

                container.appendChild(cardClone);
            });
        }

        // --- UI Control Functions (copied for consistency) ---
        function toggleMenu() {
            const navbarLinks = document.getElementById('main-nav-links');
            const hamburger = document.querySelector('.hamburger');
            navbarLinks.classList.toggle('active');
            hamburger.classList.toggle('active');
            document.body.classList.toggle('menu-open');
        }

        document.querySelectorAll('#main-nav-links a').forEach(item => {
            item.addEventListener('click', () => {
                const navbarLinks = document.getElementById('main-nav-links');
                const hamburger = document.querySelector('.hamburger');
                if (navbarLinks.classList.contains('active')) {
                    navbarLinks.classList.remove('active');
                    hamburger.classList.remove('active');
                    document.body.classList.remove('menu-open');
                }
            });
        });

        // Search Functionality
        function performSearch(query) {
            const lowerCaseQuery = query.toLowerCase();
            const filteredProducts = allProducts.filter(product =>
                product.id.toLowerCase().includes(lowerCaseQuery) ||
                product.name.toLowerCase().includes(lowerCaseQuery) ||
                product.category.toLowerCase().includes(lowerCaseQuery)
            );
            renderProducts(filteredProducts, 'category-products-grid'); // Render on this page
        }

        document.getElementById('desktop-search-input').addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                performSearch(event.target.value);
            }
        });
        document.getElementById('desktop-search-button').addEventListener('click', () => {
            performSearch(document.getElementById('desktop-search-input').value);
        });

        document.getElementById('mobile-search-input').addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                performSearch(event.target.value);
            }
        });
        document.getElementById('mobile-search-button').addEventListener('click', () => {
            performSearch(document.getElementById('mobile-search-input').value);
        });


        // --- Category Page Specific Logic ---
        document.addEventListener('DOMContentLoaded', async () => {
            const urlParams = new URLSearchParams(window.location.search);
            const categoryType = urlParams.get('type');
            const categoryTitleElement = document.getElementById('category-title');
            const productsGrid = document.getElementById('category-products-grid');

            if (categoryType) {
                categoryTitleElement.textContent = `${categoryType} Category`;
                try {
                    allProducts = await fetchProductData(); // Fetch all products
                    const filteredProducts = allProducts.filter(product =>
                        product.category.toLowerCase() === categoryType.toLowerCase()
                    );
                    renderProducts(filteredProducts, 'category-products-grid');
                } catch (error) {
                    console.error('Error loading category products:', error);
                    productsGrid.innerHTML = '<p class="text-center text-red-500">Failed to load products for this category. Please try again later.</p>';
                }
            } else {
                categoryTitleElement.textContent = 'All Products';
                document.getElementById('no-products-message').classList.remove('hidden');
                document.getElementById('no-products-message').textContent = 'No category selected. Please select a category from the homepage.';
            }
        });
    </script>
</body>
</html>